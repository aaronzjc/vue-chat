## 开发中...

重要|遗留的问题

### 2016.08.14

* ~~Websocket刷新页面连接断开~~

解决方法是，每个路由，除了登录。都去校验是否断开，如果是断开的情况，则重新连接。不在连接断开的函数中处理。

* ~~获取历史消息记录~~

获取数据，更新组件数据。同步更新全局的聊天记录。

* ~~组件异步加载数据，不同步的问题~~

我是这么处理，遇到这个问题的。底部的工具栏是全局组件。提示有多少未读消息，是通过一个全局变量来维护的。第一次登陆上来，异步获取数据。然后，在回调里面更新这个全局变量。发现，不成功。原因是，等数据回来时，组件渲染完了。所以，这里的处理是，在异步里面发送一个消息给子组件。通知更新未读消息数。

### 2016.08.15

* ~~数据缓存。为了处理用户体验，缓存太多。~~

之前觉得不太妥当，因为有缓存的地方，取数据总是很不优雅。和APP端讨论了一下，发现大抵如此。

### 2016.08.16

* ~~下拉刷新~~

下拉刷新这里，折腾了一会，但是也解决了。好说。

* 优化各个地方的请求

### 2016.08.17

* 完善一些流程，例如，注册等
* ~~动画动画动画，增加一点转场动画~~

动画这里，有个小问题，vue-router完整支持transition模式。但是要求vue-router的路由组件不能是[片段实例](https://vuejs.org.cn/guide/components.html#片断实例)。

* Fastclick
* ~~图片上传，因为没找到好的方式呈现，所以就没做~~

1. 上传按钮美化。隐藏掉默认，然后，设置容器样式。
2. 上传图片，使用浏览器FileReader类，将图片转化为Base64然后，服务器解码储存。
3. 文件上传，路径问题麻烦。

* 底层架构更改想法

我做的这个应用本质上，算是实时应用。涉及聊天等。从公司的架构思想，和其他人的例子看，是所有的请求走的socket。而不是像我这样，夹杂HTTP请求和Socket两者。所以，后期可能改进，所有的数据全部走Websocket连接。
